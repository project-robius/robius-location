thread 'rustc' panicked at compiler/rustc_infer/src/infer/at.rs:400:21:
Box<dyn Any>
stack backtrace:
   0:        0x105a6acc0 - std::backtrace::Backtrace::create::hdc1994fcb4e8c481
   1:        0x10f168c08 - <alloc[b0dc11c95d7216a5]::boxed::Box<rustc_driver_impl[3cc9bf65ca00f6ee]::install_ice_hook::{closure#0}> as core[153a4a09f3d31382]::ops::function::Fn<(&dyn for<'a, 'b> core[153a4a09f3d31382]::ops::function::Fn<(&'a core[153a4a09f3d31382]::panic::panic_info::PanicInfo<'b>,), Output = ()> + core[153a4a09f3d31382]::marker::Sync + core[153a4a09f3d31382]::marker::Send, &core[153a4a09f3d31382]::panic::panic_info::PanicInfo)>>::call
   2:        0x105a83c74 - std::panicking::rust_panic_with_hook::h83d90448f6646b96
   3:        0x10f22d90c - std[b70c874603df6a6]::panicking::begin_panic::<rustc_errors[8afa06678af9db0e]::ExplicitBug>::{closure#0}
   4:        0x10f22d608 - std[b70c874603df6a6]::sys_common::backtrace::__rust_end_short_backtrace::<std[b70c874603df6a6]::panicking::begin_panic<rustc_errors[8afa06678af9db0e]::ExplicitBug>::{closure#0}, !>
   5:        0x1132f3768 - std[b70c874603df6a6]::panicking::begin_panic::<rustc_errors[8afa06678af9db0e]::ExplicitBug>
   6:        0x10f21368c - <rustc_errors[8afa06678af9db0e]::diagnostic::BugAbort as rustc_errors[8afa06678af9db0e]::diagnostic::EmissionGuarantee>::emit_producing_guarantee
   7:        0x10fbff8c8 - rustc_middle[41002bb16f18dd76]::util::bug::opt_span_bug_fmt::<rustc_span[5f336a5c6a7d3b2b]::span_encoding::Span>::{closure#0}
   8:        0x10fbfef38 - rustc_middle[41002bb16f18dd76]::ty::context::tls::with_opt::<rustc_middle[41002bb16f18dd76]::util::bug::opt_span_bug_fmt<rustc_span[5f336a5c6a7d3b2b]::span_encoding::Span>::{closure#0}, !>::{closure#0}
   9:        0x10fbfef04 - rustc_middle[41002bb16f18dd76]::ty::context::tls::with_context_opt::<rustc_middle[41002bb16f18dd76]::ty::context::tls::with_opt<rustc_middle[41002bb16f18dd76]::util::bug::opt_span_bug_fmt<rustc_span[5f336a5c6a7d3b2b]::span_encoding::Span>::{closure#0}, !>::{closure#0}, !>
  10:        0x113372c9c - rustc_middle[41002bb16f18dd76]::util::bug::bug_fmt
  11:        0x10f86137c - <rustc_middle[41002bb16f18dd76]::ty::generic_args::GenericArg as rustc_infer[7476a3dc73ea6c0d]::infer::at::ToTrace>::to_trace
  12:        0x110a6693c - <rustc_infer[7476a3dc73ea6c0d]::infer::at::At>::eq::<rustc_middle[41002bb16f18dd76]::ty::generic_args::GenericArg>
  13:        0x110a773ec - <rustc_trait_selection[903f6ad29f897722]::traits::engine::ObligationCtxt>::eq::<rustc_middle[41002bb16f18dd76]::ty::generic_args::GenericArg>
  14:        0x110b7df00 - <rustc_infer[7476a3dc73ea6c0d]::infer::error_reporting::TypeErrCtxt as rustc_trait_selection[903f6ad29f897722]::traits::error_reporting::type_err_ctxt_ext::InferCtxtPrivExt>::report_similar_impl_candidates::{closure#0}
  15:        0x110b5c518 - <rustc_infer[7476a3dc73ea6c0d]::infer::InferCtxt>::probe::<bool, <rustc_infer[7476a3dc73ea6c0d]::infer::error_reporting::TypeErrCtxt as rustc_trait_selection[903f6ad29f897722]::traits::error_reporting::type_err_ctxt_ext::InferCtxtPrivExt>::report_similar_impl_candidates::{closure#0}>
  16:        0x1109cc760 - <rustc_infer[7476a3dc73ea6c0d]::infer::error_reporting::TypeErrCtxt as rustc_trait_selection[903f6ad29f897722]::traits::error_reporting::type_err_ctxt_ext::InferCtxtPrivExt>::report_similar_impl_candidates
  17:        0x1109d2aa0 - <rustc_infer[7476a3dc73ea6c0d]::infer::error_reporting::TypeErrCtxt as rustc_trait_selection[903f6ad29f897722]::traits::error_reporting::type_err_ctxt_ext::InferCtxtPrivExt>::try_to_add_help_message
  18:        0x1109c92dc - <rustc_infer[7476a3dc73ea6c0d]::infer::error_reporting::TypeErrCtxt as rustc_trait_selection[903f6ad29f897722]::traits::error_reporting::type_err_ctxt_ext::TypeErrCtxtExt>::report_selection_error
  19:        0x1109d4ed8 - <rustc_infer[7476a3dc73ea6c0d]::infer::error_reporting::TypeErrCtxt as rustc_trait_selection[903f6ad29f897722]::traits::error_reporting::type_err_ctxt_ext::InferCtxtPrivExt>::report_fulfillment_error
  20:        0x1109c63a4 - <rustc_infer[7476a3dc73ea6c0d]::infer::error_reporting::TypeErrCtxt as rustc_trait_selection[903f6ad29f897722]::traits::error_reporting::type_err_ctxt_ext::TypeErrCtxtExt>::report_fulfillment_errors
  21:        0x10f5d6610 - <rustc_hir_typeck[bfba8d0aae342900]::fn_ctxt::FnCtxt>::resolve_vars_with_obligations
  22:        0x10f587bac - <rustc_hir_typeck[bfba8d0aae342900]::fn_ctxt::FnCtxt>::check_argument_types
  23:        0x10f586ff4 - <rustc_hir_typeck[bfba8d0aae342900]::fn_ctxt::FnCtxt>::check_method_argument_types
  24:        0x10f5d3f04 - <rustc_hir_typeck[bfba8d0aae342900]::fn_ctxt::FnCtxt>::check_expr_kind
  25:        0x10f572714 - <rustc_hir_typeck[bfba8d0aae342900]::fn_ctxt::FnCtxt>::check_expr_with_expectation_and_args
  26:        0x10f58e65c - <rustc_hir_typeck[bfba8d0aae342900]::fn_ctxt::FnCtxt>::check_decl_initializer
  27:        0x10f58e7dc - <rustc_hir_typeck[bfba8d0aae342900]::fn_ctxt::FnCtxt>::check_decl
  28:        0x10f58ec44 - <rustc_hir_typeck[bfba8d0aae342900]::fn_ctxt::FnCtxt>::check_stmt
  29:        0x10f58f198 - <rustc_hir_typeck[bfba8d0aae342900]::fn_ctxt::FnCtxt>::check_block_with_expected
  30:        0x10f572714 - <rustc_hir_typeck[bfba8d0aae342900]::fn_ctxt::FnCtxt>::check_expr_with_expectation_and_args
  31:        0x10f573300 - <rustc_hir_typeck[bfba8d0aae342900]::fn_ctxt::FnCtxt>::check_return_expr
  32:        0x10f69d694 - rustc_hir_typeck[bfba8d0aae342900]::check::check_fn
  33:        0x10f62dc2c - rustc_hir_typeck[bfba8d0aae342900]::typeck
  34:        0x11048a8c8 - rustc_query_impl[816618de84ba844]::plumbing::__rust_begin_short_backtrace::<rustc_query_impl[816618de84ba844]::query_impl::typeck::dynamic_query::{closure#2}::{closure#0}, rustc_middle[41002bb16f18dd76]::query::erase::Erased<[u8; 8usize]>>
  35:        0x110564b0c - <rustc_query_impl[816618de84ba844]::query_impl::typeck::dynamic_query::{closure#2} as core[153a4a09f3d31382]::ops::function::FnOnce<(rustc_middle[41002bb16f18dd76]::ty::context::TyCtxt, rustc_span[5f336a5c6a7d3b2b]::def_id::LocalDefId)>>::call_once
  36:        0x11042e7ec - rustc_query_system[4617ca2eed8c4435]::query::plumbing::try_execute_query::<rustc_query_impl[816618de84ba844]::DynamicConfig<rustc_query_system[4617ca2eed8c4435]::query::caches::VecCache<rustc_span[5f336a5c6a7d3b2b]::def_id::LocalDefId, rustc_middle[41002bb16f18dd76]::query::erase::Erased<[u8; 8usize]>>, false, false, false>, rustc_query_impl[816618de84ba844]::plumbing::QueryCtxt, true>
  37:        0x110606b10 - rustc_query_impl[816618de84ba844]::query_impl::typeck::get_query_incr::__rust_end_short_backtrace
  38:        0x10f4f8e94 - <rustc_middle[41002bb16f18dd76]::hir::map::Map>::par_body_owners::<rustc_hir_analysis[2c387bcc114465b6]::check_crate::{closure#4}>::{closure#0}
  39:        0x10f4f5244 - <rustc_data_structures[b85285f53c509edc]::sync::parallel::ParallelGuard>::run::<(), rustc_data_structures[b85285f53c509edc]::sync::parallel::enabled::par_for_each_in<&rustc_span[5f336a5c6a7d3b2b]::def_id::LocalDefId, &[rustc_span[5f336a5c6a7d3b2b]::def_id::LocalDefId], <rustc_middle[41002bb16f18dd76]::hir::map::Map>::par_body_owners<rustc_hir_analysis[2c387bcc114465b6]::check_crate::{closure#4}>::{closure#0}>::{closure#0}::{closure#0}::{closure#0}>
  40:        0x10f4be0cc - rustc_hir_analysis[2c387bcc114465b6]::check_crate
  41:        0x10f8e2310 - rustc_interface[7886f7beac8da793]::passes::analysis
  42:        0x11048a968 - rustc_query_impl[816618de84ba844]::plumbing::__rust_begin_short_backtrace::<rustc_query_impl[816618de84ba844]::query_impl::analysis::dynamic_query::{closure#2}::{closure#0}, rustc_middle[41002bb16f18dd76]::query::erase::Erased<[u8; 1usize]>>
  43:        0x1106447f8 - <rustc_query_impl[816618de84ba844]::query_impl::analysis::dynamic_query::{closure#2} as core[153a4a09f3d31382]::ops::function::FnOnce<(rustc_middle[41002bb16f18dd76]::ty::context::TyCtxt, ())>>::call_once
  44:        0x1103a1c10 - rustc_query_system[4617ca2eed8c4435]::query::plumbing::try_execute_query::<rustc_query_impl[816618de84ba844]::DynamicConfig<rustc_query_system[4617ca2eed8c4435]::query::caches::SingleCache<rustc_middle[41002bb16f18dd76]::query::erase::Erased<[u8; 1usize]>>, false, false, false>, rustc_query_impl[816618de84ba844]::plumbing::QueryCtxt, true>
  45:        0x110584644 - rustc_query_impl[816618de84ba844]::query_impl::analysis::get_query_incr::__rust_end_short_backtrace
  46:        0x10f1a4194 - <rustc_interface[7886f7beac8da793]::queries::QueryResult<&rustc_middle[41002bb16f18dd76]::ty::context::GlobalCtxt>>::enter::<core[153a4a09f3d31382]::result::Result<(), rustc_span[5f336a5c6a7d3b2b]::ErrorGuaranteed>, rustc_driver_impl[3cc9bf65ca00f6ee]::run_compiler::{closure#0}::{closure#1}::{closure#3}>
  47:        0x10f18cc50 - <rustc_interface[7886f7beac8da793]::interface::Compiler>::enter::<rustc_driver_impl[3cc9bf65ca00f6ee]::run_compiler::{closure#0}::{closure#1}, core[153a4a09f3d31382]::result::Result<core[153a4a09f3d31382]::option::Option<rustc_interface[7886f7beac8da793]::queries::Linker>, rustc_span[5f336a5c6a7d3b2b]::ErrorGuaranteed>>
  48:        0x10f16b628 - rustc_span[5f336a5c6a7d3b2b]::set_source_map::<core[153a4a09f3d31382]::result::Result<(), rustc_span[5f336a5c6a7d3b2b]::ErrorGuaranteed>, rustc_interface[7886f7beac8da793]::interface::run_compiler<core[153a4a09f3d31382]::result::Result<(), rustc_span[5f336a5c6a7d3b2b]::ErrorGuaranteed>, rustc_driver_impl[3cc9bf65ca00f6ee]::run_compiler::{closure#0}>::{closure#0}::{closure#0}>
  49:        0x10f1a7bac - <scoped_tls[e07671f0187c90a4]::ScopedKey<rustc_span[5f336a5c6a7d3b2b]::SessionGlobals>>::set::<rustc_interface[7886f7beac8da793]::util::run_in_thread_with_globals<rustc_interface[7886f7beac8da793]::util::run_in_thread_pool_with_globals<rustc_interface[7886f7beac8da793]::interface::run_compiler<core[153a4a09f3d31382]::result::Result<(), rustc_span[5f336a5c6a7d3b2b]::ErrorGuaranteed>, rustc_driver_impl[3cc9bf65ca00f6ee]::run_compiler::{closure#0}>::{closure#0}, core[153a4a09f3d31382]::result::Result<(), rustc_span[5f336a5c6a7d3b2b]::ErrorGuaranteed>>::{closure#0}, core[153a4a09f3d31382]::result::Result<(), rustc_span[5f336a5c6a7d3b2b]::ErrorGuaranteed>>::{closure#0}::{closure#0}::{closure#0}, core[153a4a09f3d31382]::result::Result<(), rustc_span[5f336a5c6a7d3b2b]::ErrorGuaranteed>>
  50:        0x10f173f14 - std[b70c874603df6a6]::sys_common::backtrace::__rust_begin_short_backtrace::<rustc_interface[7886f7beac8da793]::util::run_in_thread_with_globals<rustc_interface[7886f7beac8da793]::util::run_in_thread_pool_with_globals<rustc_interface[7886f7beac8da793]::interface::run_compiler<core[153a4a09f3d31382]::result::Result<(), rustc_span[5f336a5c6a7d3b2b]::ErrorGuaranteed>, rustc_driver_impl[3cc9bf65ca00f6ee]::run_compiler::{closure#0}>::{closure#0}, core[153a4a09f3d31382]::result::Result<(), rustc_span[5f336a5c6a7d3b2b]::ErrorGuaranteed>>::{closure#0}, core[153a4a09f3d31382]::result::Result<(), rustc_span[5f336a5c6a7d3b2b]::ErrorGuaranteed>>::{closure#0}::{closure#0}, core[153a4a09f3d31382]::result::Result<(), rustc_span[5f336a5c6a7d3b2b]::ErrorGuaranteed>>
  51:        0x10f1af7b8 - <<std[b70c874603df6a6]::thread::Builder>::spawn_unchecked_<rustc_interface[7886f7beac8da793]::util::run_in_thread_with_globals<rustc_interface[7886f7beac8da793]::util::run_in_thread_pool_with_globals<rustc_interface[7886f7beac8da793]::interface::run_compiler<core[153a4a09f3d31382]::result::Result<(), rustc_span[5f336a5c6a7d3b2b]::ErrorGuaranteed>, rustc_driver_impl[3cc9bf65ca00f6ee]::run_compiler::{closure#0}>::{closure#0}, core[153a4a09f3d31382]::result::Result<(), rustc_span[5f336a5c6a7d3b2b]::ErrorGuaranteed>>::{closure#0}, core[153a4a09f3d31382]::result::Result<(), rustc_span[5f336a5c6a7d3b2b]::ErrorGuaranteed>>::{closure#0}::{closure#0}, core[153a4a09f3d31382]::result::Result<(), rustc_span[5f336a5c6a7d3b2b]::ErrorGuaranteed>>::{closure#2} as core[153a4a09f3d31382]::ops::function::FnOnce<()>>::call_once::{shim:vtable#0}
  52:        0x105a8c6fc - std::sys::pal::unix::thread::Thread::new::thread_start::h56bc2156fc274a0f
  53:        0x18c922034 - __pthread_joiner_wake


rustc version: 1.79.0-nightly (0d8b3346a 2024-04-14)
platform: aarch64-apple-darwin

query stack during panic:
#0 [typeck] type-checking `sys::android::<impl at /Users/klim/Projects/robius/shared-directory-utm/robius-location/src/sys/android.rs:14:1: 14:13>::request_location`
#1 [analysis] running analysis passes on this crate
end of query stack
